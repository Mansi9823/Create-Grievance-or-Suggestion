
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Incentive_Management </title>
    <style>
body {
  font-family: Arial, sans-serif;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  margin: 0;
  background-color: #121212;
  color: #fff;
  padding-top: 4em; /* Add padding to avoid overlap with fixed header */
}

.container {
  display: flex;
  flex-wrap: wrap;
  align-items: flex-start;
  background: #292727;
  padding: 10px;
  border-radius: 10px;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
  max-width: 1000px;
  overflow: auto;
  margin: 20px auto;
}

@media (max-width: 768px) {
  .container {
    flex-direction: column;
    align-items: center;
    margin-top: 70px;
  }
  .form-container {
    margin-bottom: 20px;
    min-height: 100px;
    margin-right: 10px;
  }
  .form-container form .radio-group .card {
    justify-content: flex-start;
  }
}

.form-container {
  flex: 1;
  min-width: 300px;
  margin-right: -50px;
  position: relative;
  overflow: auto;
}
.dots {
  display: flex;
  gap: 4px;
  margin-bottom: 7px;
  position: relative;
}

.dots .dot {
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background-color: #ef6b5c;
  box-shadow: 0 0 5px rgba(255, 255, 255, 0.6);
}

.dots .dot:nth-child(2) {
  background-color: #f6c352;
}

.dots .dot:nth-child(3) {
  background-color: #65c259;
}

@media (max-width: 768px) {
  .dots {
    gap: 8px;
    margin-bottom: 10px;
  }

  .dots .dot {
    width: 12px;
    height: 12px;
  }
}

.form-container h1 {
  margin: 0;
  font-size: 24px;
}
.form-container h3 {
  margin: 5px 0 15px 0;
  font-size: 16px;
  font-weight: normal;
}
.form-container form {
  display: flex;
  flex-direction: column;
}

.form-container form textarea {
  resize: vertical;
  height: 100px;
}
.form-container form .radio-group {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin-bottom: 15px;
}
.form-container form .radio-group .card {
  display: flex;
  align-items: center;
  padding: 10px;
  border-radius: 5px;
  border: 1px solid #655d5d;
  cursor: pointer;
  background-color: #292727;
  color: #fff;
  transition: background-color 0.3s ease;
  flex: 1 1 45%;
  box-sizing: border-box;
  min-width: 120px;
  justify-content: flex-start;
}
.radio-group span {
  font-size: 16px;
  color: #aaa; /* Disabled-like color */
}

input[type="text"],
input[type="tel"],
textarea,
select {
  width: 100%;
  padding: 10px;
  margin-bottom: 10px;
  border: 1px solid #555;
  border-radius: 5px;
  background-color: #292727;
  color: #fff;
}

button {
  background-color: #555;
  color: #fff;
  border: none;
  padding: 10px 20px;
  border-radius: 5px;
  cursor: pointer;
}

button:hover {
  background-color: #666;
}

.form-container form input,
.form-container form textarea,
.form-container form select {
  padding: 10px;
  margin-bottom: 10px;
  border: 1px solid #655d5d;
  border-radius: 5px;
  width: 100%;
  color: white;
  box-sizing: border-box;
}
.form-container form textarea {
  resize: vertical;
  height: 100px;
}
.form-container form input:focus,
.form-container form textarea:focus {
  border: 1px solid #fff; /* White border when focused */
  outline: none; /* Remove default outline if any */
  background-color: #292727; /* Black background when focused */
}

.form-container form button {
  padding: 8px 20px;
  border: none;
  border-radius: 25px;
  background-color: #4889dd;
  color: white;
  cursor: pointer;
  font-size: 14px;
  align-self: center;
  margin-top: 20px;
  transition: background-color 0.3s ease;
}
.form-container form button:hover {
  background-color: black;
}
.form-container .radio-group .grievance-card {
  color: red;
}
.form-container .radio-group .suggestion-card {
  color: green;
}
.image-container {
  flex: 1;
  display: flex;
  justify-content: center;
  align-items: center;
}
.image-container img {
  max-width: 65%;
  border-radius: 10px;
}
@media (max-width: 768px) {
  .container {
    flex-direction: column;
    align-items: center;
  }
  .form-container {
    margin-right: 0;
    margin-bottom: 20px;
  }
  .form-container form .radio-group .card {
    justify-content: flex-start;
  }
}
.grievance {
  color: #ff3c3c;
  font-weight: normal;
}
.suggestion {
  color: #bbff64;
  font-weight: normal;
}
.response-section {
  display: none;
}

.thank-you-card {
  /* display: none; */
  flex-direction: row;
  align-items: center;
  justify-content: center;
  background: #292727;
  padding: 60px;
  border-radius: 10px;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
  color: #fff;
  max-width: 1000px;
  margin: 30px;
  text-align: center;
  position: relative;
}

.thank-you-card .dots {
  position: absolute;
  top: -5px;
  left: 0;
  display: flex;
  gap: 8px;
  margin-bottom: 7px;
}

.thank-you-card .dots .dot {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background-color: #ffffff;
  box-shadow: 0 0 5px rgba(255, 255, 255, 0.6);
}

.thank-you-card .dots .dot:nth-child(1) {
  background-color: #ef6b5c;
}

.thank-you-card .dots .dot:nth-child(2) {
  background-color: #f6c352;
}

.thank-you-card .dots .dot:nth-child(3) {
  background-color: #65c259;
}

.thank-you-card .content {
  display: flex;
  flex-direction: column;
  align-items: center;
  flex: 1;
}

.thank-you-card img.icon {
  width: 50px;
  height: 50px;
  margin-bottom: 20px;
  margin-right: 20px;
}

.thank-you-card h1 {
  margin-bottom: 20px;
  font-size: 24px;
}

.thank-you-card p {
  font-size: 16px;
  margin-bottom: 20px;
}

.thank-you-card button {
  padding: 10px 20px;
  border: none;
  border-radius: 25px;
  background-color: #4889dd;
  color: white;
  cursor: pointer;
  font-size: 14px;
  margin-top: 20px;
  transition: background-color 0.3s ease;
}

.thank-you-card button:hover {
  background-color: black;
}

.thank-you-card .image-container {
  display: flex;
  justify-content: center;
  align-items: center;
  margin-top: 20px;
}

.thank-you-card .image-container img {
  max-width: 65%;
  border-radius: 10px;
}

@media (max-width: 768px) {
  .thank-you-card {
    flex-direction: column;
    align-items: center;
    padding: 40px;
  }

  .thank-you-card .content {
    align-items: center;
  }

  .thank-you-card .dots {
    top: -5px;
    left: 0;
    gap: 4px;
    margin-bottom: 10px;
  }

  .thank-you-card .dots .dot {
    width: 10px;
    height: 10px;
  }

  .thank-you-card img.icon {
    width: 40px;
    height: 40px;
    margin-bottom: 15px;
    margin-right: 0;
  }

  .thank-you-card h1 {
    font-size: 20px;
    margin-bottom: 15px;
  }

  .thank-you-card p {
    font-size: 14px;
    margin-bottom: 15px;
  }

  .thank-you-card button {
    font-size: 14px;
    margin-top: 20px;
  }
}
header {
  background-color: #2c2c2c;
  color: white;
  padding: 8px;
  display: flex;
  align-items: center;
  justify-content: flex-start; /* Logo aligned to the left in desktop view */
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  z-index: 1000; /* Ensure header stays on top */
  height: 3em;
}

header img {
  width: 200px; /* Increased width */
  height: 70px; /* Increased height */
  margin-right: 10px;
}

header h1 {
  font-size: 24px;
  margin: 0;
}

@media (max-width: 768px) {
  header h1 {
    font-size: 20px;
  }
}
@media (max-width: 768px) {
  header {
    justify-content: center; /* Center logo in mobile view */
  }
  header img {
    margin-right: 0; /* Remove margin in mobile view */
  }
  header h1 {
    font-size: 20px;
  }
}
.form-container form .radio-group .card.selected {
  border-color: #fff; /* White border for selected card */
  background-color: #292727; /* Match the background color to unselected state */
  color: #fff; /* Keep text color white */
}

.form-container form .radio-group .card.selected span {
  color: #fff; /* Explicitly set text color to white when selected */
}
@media (min-width: 769px) {
  .form-container form .radio-group .card {
    display: flex;
    align-items: center;
    justify-content: flex-start;
    flex-direction: row;
    gap: 10px;
    padding: 10px;
    border: 1px solid #655d5d;
    border-radius: 5px;
    background-color: #292727;
    color: #fff;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }

  .form-container form .radio-group .card input[type="radio"] {
    margin-right: 10px;
  }

  .form-container form .radio-group .card span {
    font-size: 16px;
    color: #655d5d;
    margin-left: 0;
  }
}

/* For mobile view: Radio button and text in a row */
@media (max-width: 768px) {
  .form-container form .radio-group .card {
    display: flex; /* Use flexbox for alignment */
    flex-direction: row; /* Radio button and text in a row */
    align-items: center; /* Center items vertically */
    justify-content: flex-start; /* Align items to the left */
    gap: 10px; /* Space between the radio button and text */
  }

  .form-container form .radio-group .card input[type="radio"] {
    margin-right: 10px; /* Space between radio button and text */
  }

  .form-container form .radio-group .card span {
    font-size: 16px; /* Adjust font size if needed */
  }
}
.radio-group {
  display: flex;
  gap: 10px;
}

.card {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 20px;
  border: 1px solid #ccc;
  border-radius: 8px;
  cursor: pointer;
  background-color: #f5f5f5;
  transition: background-color 0.3s;
  user-select: none; /* Prevents text selection */
}

.card:hover {
  background-color: #e0e0e0;
}

.radio-icon {
  width: 20px; /* Adjusted default width */
  height: 20px; /* Adjusted default height */
  border-radius: 50%;
  border: 2px solid #6d6d6d;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}

/* Style for the inner circle of the radio button */
.radio-icon::before {
  content: "";
  width: 10px; /* Adjusted default width */
  height: 10px; /* Adjusted default height */
  border-radius: 50%;
  background-color: transparent;
  position: absolute;
}

/* Adjustments for mobile view */
@media (max-width: 600px) {
  .radio-icon {
    width: 20px; /* Adjusted mobile width */
    height: 16px; /* Adjusted mobile height */
  }

  .radio-icon::before {
    width: 9px; /* Adjusted mobile width */
    height: 8px; /* Adjusted mobile height */
  }
}

/* Adjustments for larger screens */
@media (min-width: 601px) {
  .radio-icon {
    width: 20px; /* Adjusted desktop width */
    height: 20px; /* Adjusted desktop height */
  }

  .radio-icon::before {
    width: 10px; /* Adjusted desktop width */
    height: 10px; /* Adjusted desktop height */
  }
}

/* Hide the default radio input */
input[type="radio"] {
  display: none;
}

/* Styles for the checked state */
input[type="radio"]:checked + .card .radio-icon {
  border-color: #f5efef; /* Border color when checked */
}

input[type="radio"]:checked + .card .radio-icon::before {
  background-color: #ebebeb; /* Inner circle color when checked */
}

/* Style for the card label and text */
.card {
  display: flex;
  align-items: center;
  cursor: pointer;
  padding: 10px;
  border: 2px solid transparent; /* Default border color */
  border-radius: 8px;
  transition: border-color 0.3s;
}

.card span {
  margin-left: 10px; /* Space between radio icon and text */
  font-size: 16px; /* Adjust font size as needed */
  color: #aaa; /* Default text color */
}

/* Style for checked state card border and text color */
input[type="radio"]:checked + .card {
  border-color: #ebebeb; /* Border color for the selected card */
}

input[type="radio"]:checked + .card span {
  color: #ebebeb; /* Color for the text when checked */
}

/* Hover effect for card */
.card:hover {
  background-color: #f5f5f5; /* Light background color on hover */
}

/* Styles for desktop view */
@media (min-width: 1024px) {
  /* Adjust the min-width value as needed */
  .container {
    padding: 0px; /* Set padding to 0px for desktop view */
  }
}
@media (min-width: 1024) {
  .image-container img {
    max-width: 95%;
    border-radius: 10px;
  }
}

/* Styles for desktop view */
@media (min-width: 1024px) {
  /* Adjust the min-width value as needed */
  .form-container {
    flex: 1;
    min-width: 500px;
    margin-left: 70px;
    margin-right: 20px;
    margin-top: 30px;
    margin-bottom: 30px;
    position: relative;
    overflow: auto;
  }
}

/* Styles for desktop view */
@media (min-width: 1024px) {
  /* Adjust the min-width value as needed */
  .small-image {
    width: 950px; /* Adjust the width percentage to make the image smaller or larger */
    height: auto; /* Keeps the image's aspect ratio */
    margin-left: 10px;
    margin-top: 50px;
  }
}

/* Basic styles for text input */
/* Basic styles for all text input fields and textarea */
input[type="text"],
input[type="tel"],
textarea[name="description"], /* Apply styles specifically for the description textarea */
textarea[name="branch-name"],
textarea {
  width: 100%; /* Adjust width as needed */
  padding: 10px;
  border: 2px solid #6d6d6d; /* Default border color */
  border-radius: 4px;
  transition: border-color 0.3s;
  box-sizing: border-box; /* Ensures padding and border are included in the element's total width and height */
}

/* Style for inputs and textarea when focused */
input[type="text"]:focus,
input[type="tel"]:focus,
textarea[name="description"]:focus,
textarea[name="branch-name"]:focus, /* Style for the description textarea when focused */
textarea:focus {
  border-color: #ffffff; /* White border color when focused */
  outline: none; /* Remove default outline */
}

/* Style for inputs and textarea when they have a value entered */
input[type="text"]:not(:placeholder-shown),
input[type="tel"]:not(:placeholder-shown),
textarea[name="description"]:not(:placeholder-shown),
textarea[name="branch-name"]:not(:placeholder-shown), /* Style for the description textarea when it has a value */
textarea:not(:placeholder-shown) {
  border-color: #ffffff; /* White border color when the input or textarea has a value */
}

/* Placeholder text color */
input[type="text"]::placeholder,
input[type="tel"]::placeholder,
textarea[name="description"]::placeholder,
textarea[name="branch-name"]::placeholder, /* Placeholder text color for the description textarea */
textarea::placeholder {
  color: #999; /* Placeholder text color */
}
select#branch-name {
  width: 100%; /* Adjust width as needed */
  padding: 10px;
  font-size: 16px;
  border: 1px solid #6d6d6d; /* Default border color */
  color: #aaa;
  border-radius: 4px;
  transition: border-color 0.3s;
  box-sizing: border-box; /* Ensures padding and border are included in the element's total width and height */
  appearance: none; /* Removes default styling in some browsers */
}
select#branch-name:focus {
  border-color: #ffffff; /* White border color when focused */
  outline: none; /* Remove default outline */
}
select#branch-name:valid {
  border-color: #ffffff; /* White border color when the select has a value */
  color: white;
}
.checkbox-label-container {
  display: flex;
  align-items: center;
}

.checkbox-label-container input[type="checkbox"] {
  margin-right: -240px; /* Adjust spacing between checkbox and label */
  margin-left: -240px; /* Adjust position of checkbox to the left */
  transform: scale(1.5);
}

.checkbox-label-container label {
  margin-left: 10px; /* Remove default margin from label */
}

/* Mobile view adjustments */
@media (max-width: 767px) {
  .checkbox-label-container input[type="checkbox"] {
    margin-right: -170px; /* Adjust spacing for mobile view */
    margin-left: -170px; /* Reset left margin for mobile view */
    transform: scale(1); /* Adjust scale for mobile view */
  }
}

/* General styling for input fields, textareas, and select */
.input-container,
.select-container {
  position: relative;
  margin-bottom: 15px;
}

input,
textarea,
select {
  position: relative;
  padding: 12px;
  border: 1px solid #ccc;
  border-radius: 4px;
  width: 100%;
}

/* Styling for the floating label */
.input-container label,
.select-container label {
  position: absolute;
  top: 12px; /* Adjust this value based on your design needs */
  left: 12px;
  font-size: 14px; /* Normal font size */
  color: #999; /* Default color for the label */
  pointer-events: none;
  transition: all 0.3s ease;
  background: #292727; /* Match background color to avoid overlap */
  padding: 0 5px; /* Add padding to prevent overlap */
}

/* When the input/select is focused or has a value, move the label up */
.input-container input:focus + label,
.input-container input:not(:placeholder-shown) + label,
.select-container select:focus + label,
.select-container select:valid + label {
  top: -10px; /* Move label above the input */
  font-size: 12px; /* Smaller font size for the floating label */
  color: white; /* Color for focused state */
}

/* Floating label when input is focused or not empty */
input:focus + label,
textarea:focus + label,
input:not(:placeholder-shown) + label,
textarea:not(:placeholder-shown) + label,
select:focus + label {
  top: -8px; /* Adjust based on your design needs */
  left: 12px; /* Keep it aligned */
  font-size: 12px; /* Smaller font size when floating */
  color: white; /* Color for floating label */
}

/* Placeholder styling */
input::placeholder,
textarea::placeholder {
  color: transparent; /* Hide placeholder text */
}

/* Adjust input and textarea padding to ensure floating labels do not overlap */
input,
textarea {
  padding-top: 24px; /* Adjust to fit floating label */
}
input:-webkit-autofill,
input:-webkit-autofill:hover,
input:-webkit-autofill:focus,
textarea:-webkit-autofill,
textarea:-webkit-autofill:hover,
textarea:-webkit-autofill:focus,
select:-webkit-autofill,
select:-webkit-autofill:hover,
select:-webkit-autofill:focus {
  -webkit-text-fill-color: white; /* Set the text color to black */
  /* Set the background color to black */
  transition: background-color 5000s ease-in-out 0s; /* Smooth transition for background color */
}

</style>
</head>
<body>

      <header>
        <img
          src="\C:\mansi\sahayog _logo.svg"
          alt="Sahayog Logo"
          class="header-logo"
        />
      </header>
      <div class="container" id="container">
        <div class="form-container">
          <div class="dots">
            <div class="dot"></div>
            <div class="dot"></div>
            <div class="dot"></div>
          </div>
          <br />
          <div class="form-section" id="form-section">
            <h1>
              Create <span class="grievance">Grievance</span> or
              <span class="suggestion">Suggestion</span>
            </h1>
            <h3>Select Type of Action</h3>
            <form
              id="submission-form"
              hx-post="/api/method/sahayog_ticket.sahayog_ticket.doctype.grievances_and_redressal.grievances_and_redressal.submit_form"
              hx-target="#thank-you-card"
              hx-swap="innerHTML"
            >
              <div class="radio-group">
                <input
                  type="radio"
                  id="grievance"
                  name="ticket_type"
                  value="Grievance"
                  required
                />
                <label for="grievance" class="card grievance-card">
                  <div class="radio-icon"></div>
                  <span>Grievance / शिकायत</span>
                </label>
  
                <input
                  type="radio"
                  id="suggestion"
                  name="ticket_type"
                  value="Suggestion"
                  required
                />
                <label for="suggestion" class="card suggestion-card">
                  <div class="radio-icon"></div>
                  <span>Suggestion / सुझाव</span>
                </label>
              </div>
  
              <div class="input-container">
                <input
                  type="text"
                  id="full-name"
                  name="full-name"
                  placeholder=" "
                  required
                />
                <label for="full-name">Full Name</label>
              </div>
  
              <div class="input-container">
                <input
                  type="tel"
                  id="phone-number"
                  name="phone-number"
                  placeholder=" "
                  required
                  maxlength="10"
                />
                <label for="phone-number">Phone Number</label>
              </div>
  
              <div class="select-container">
                <select id="branch-name" name="branch" required>
                  <option value="" disabled selected hidden>Branch Name</option>
                  <option value="1">Branch 1</option>
                  <option value="2">Branch 2</option>
                  <!-- Add more options here -->
                </select>
              </div>
              
              <div class="input-container">
                <textarea
                  id="description"
                  name="description"
                  placeholder=" "
                  required
                ></textarea>
                <label for="description">Description</label>
              </div>
  
              
              <div class="checkbox-label-container">
                <input type="checkbox" id="anonymous" name="anonymous" />
                <label for="anonymous">Send form as Anonymous user</label>
              </div>
  
             
              <button type="submit">Submit</button>
            </form>
          </div>
          <div
            class="response-section"
            id="response-section"
            style="display: none"
          >
            <div class="thank-you-card" id="thank-you-card">
              <!-- HTMX will replace this content -->
              
            </div>
          </div>
        </div>
  
        <div class="image-container">
          <img
            src="C:\mansi\Grievance.jpg"
            alt="Placeholder Image"
            class="small-image"
          />
        </div>
      </div>
  
      <!-- ################################# Validation of fields ################################################################# -->
  
      <script>
        /////////////////  Validation of Full_Name, Phone_Number, Branch_name, Decription  //////////////////////////////////////////////////
  
        // Function to restrict input to specific keys for alphabetic fields
        function restrictInput(event) {
          // Allow: backspace, delete, tab, escape, enter, arrow keys
          if (
            event.key === "Backspace" ||
            event.key === "Delete" ||
            event.key === "Tab" ||
            event.key === "Escape" ||
            event.key === "Enter" ||
            event.key.startsWith("Arrow") ||
            event.key === " " // space
          ) {
            return; // Allow these keys
          }
  
          // Allow: alphabets (both lowercase and uppercase)
          if (/^[a-zA-Z]$/.test(event.key)) {
            return; // Allow alphabetic characters
          }
  
          // Prevent other keys
          event.preventDefault();
        }
  
        // Function to restrict input to numeric digits only
        function restrictNumericInput(event) {
          // Allow: backspace, delete, tab, escape, enter, arrow keys
          if (
            event.key === "Backspace" ||
            event.key === "Delete" ||
            event.key === "Tab" ||
            event.key === "Escape" ||
            event.key === "Enter" ||
            event.key.startsWith("Arrow")
          ) {
            return; // Allow these keys
          }
  
          // Allow only numeric keys
          if (/^[0-9]$/.test(event.key)) {
            return; // Allow numbers
          }
  
          // Prevent other keys
          event.preventDefault();
        }
  
        // Function to ensure the phone number field only contains numeric values,
        // is limited to 10 digits, and does not start with zero
        function validatePhoneNumber(event) {
          const input = event.target;
          const value = input.value;
  
          // Check if length exceeds 10 digits
          if (
            value.length >= 10 &&
            !["Backspace", "Delete", "ArrowLeft", "ArrowRight"].includes(
              event.key
            )
          ) {
            event.preventDefault(); // Prevent input if length is 10 and trying to add more
          }
  
          // Prevent entry if the first digit is zero and the field is not empty
          if (value.length === 0 && event.key === "0") {
            event.preventDefault(); // Prevent starting with zero
          }
        }
  
        // Apply restriction to the specified input fields
        document
          .getElementById("full-name")
          .addEventListener("keydown", restrictInput);
  
        // Apply restriction and validation to the phone number field
        document
          .getElementById("phone-number")
          .addEventListener("keydown", function (event) {
            restrictNumericInput(event);
            validatePhoneNumber(event);
          });
  
        // Additional listener for input events to handle cases where users paste text
        document
          .getElementById("phone-number")
          .addEventListener("input", function (event) {
            const input = event.target;
            let value = input.value;
  
            // Remove leading zeros
            if (value.startsWith("0")) {
              value = value.replace(/^0+/, "");
              input.value = value;
            }
  
            // Ensure the length does not exceed 10 digits
            if (value.length > 10) {
              input.value = value.slice(0, 10);
            }
          });
  
        //##############################THANK YOU CARD VALIDATION ######################################################################
  
        document.addEventListener("DOMContentLoaded", function () {
          var formSection = document.getElementById("form-section");
          var responseSection = document.getElementById("response-section");
          var form = document.getElementById("submission-form");
  
          // Add event listener for HTMX response
          document.body.addEventListener("htmx:afterSwap", function (event) {
            // Check if the swap was successful and if it affected the target
            if (event.detail.target.id === "thank-you-card") {
              // Clear the form fields
              form.reset();
              // Hide the form section and show the response section
              formSection.style.display = "none";
              responseSection.style.display = "block";
            }
          });
  
          // Warn user about unsaved changes
          window.addEventListener("beforeunload", function (e) {
            // Check if the form is not empty
            if (
              form.querySelector("input:not([type='radio']):not([value=''])") ||
              form.querySelector("textarea:not([value=''])")
            ) {
              // Standard way to trigger the confirmation dialog
              e.preventDefault();
              e.returnValue = ""; // Chrome requires returnValue to be set
            }
          });
        });
      </script>
      <script>
        // Fetch branches and populate dropdown
        function populateBranches() {
          fetch(
            "/api/method/sahayog_ticket.sahayog_ticket.doctype.grievances_and_redressal.grievances_and_redressal.get_branches"
          )
            .then((response) => response.json()) // Parse JSON directly
            .then((data) => {
              console.log("Branch Data:", data); // Log the entire data object
  
              const branchSelect = document.getElementById("branch-name");
              if (branchSelect) {
                // Start with the default option
                branchSelect.innerHTML =
                  '<option value="">Select a branch</option>';
  
                // Check if branches are inside a message object
                if (data.message && Array.isArray(data.message.branches)) {
                  // Generate options from data
                  const branches = data.message.branches;
  
                  // Sort branches alphabetically by branch_name
                  branches.sort((a, b) => {
                    const nameA = a.branch_name.toUpperCase(); // Ignore upper and lowercase
                    const nameB = b.branch_name.toUpperCase(); // Ignore upper and lowercase
                    if (nameA < nameB) {
                      return -1;
                    }
                    if (nameA > nameB) {
                      return 1;
                    }
                    return 0;
                  });
  
                  // Create options
                  const options = branches
                    .map((branch) => {
                      const branchName = branch.branch_name;
                      if (branchName) {
                        return `<option value="${branchName}">${branchName}</option>`;
                      } else {
                        console.error(
                          "Branch field is missing in the branch object:",
                          branch
                        );
                        return ""; // Return empty string if branch field is missing
                      }
                    })
                    .join(""); // Join options into a single string
  
                  // Append options to the select element
                  branchSelect.innerHTML += options;
                } else {
                  console.error(
                    "Error fetching branches or unexpected data structure:",
                    data
                  );
                }
              } else {
                console.error("Dropdown element not found.");
              }
            })
            .catch((error) => console.error("Fetch error:", error));
        }
  
        document.addEventListener("DOMContentLoaded", populateBranches);
      </script>
      <script>
        // Variables to store the original values
        let originalPhoneNumber = "";
        let originalFullName = "";
  
        document
          .getElementById("anonymous")
          .addEventListener("change", function () {
            var isChecked = this.checked;
  
            // Get references to the input elements
            var phoneNumberInput = document.getElementById("phone-number");
            var fullNameInput = document.getElementById("full-name");
  
            if (isChecked) {
              // Store the original values
              originalPhoneNumber = phoneNumberInput.value;
              originalFullName = fullNameInput.value;
  
              // Set default values if checkbox is checked
              phoneNumberInput.value = "xxxxxxxxx";
              fullNameInput.value = "xxxxxxxxx";
            } else {
              // Restore the original values if checkbox is unchecked
              phoneNumberInput.value = originalPhoneNumber;
              fullNameInput.value = originalFullName;
            }
          });
      </script>
    </body>
  </html>
  